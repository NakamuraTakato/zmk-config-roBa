# ============================================================
# roBa 右手側 ファームウェア設定
# ============================================================

# --- 基本設定 ---
# キーボード名（Bluetooth接続時に表示される名前）
CONFIG_ZMK_KEYBOARD_NAME="roBa-TakasHome"

# --- 通信設定 ---
# Bluetooth Low Energy（BLE）を有効化
CONFIG_ZMK_BLE=y
# ポインティングデバイス（マウス機能）を有効化
CONFIG_ZMK_POINTING=y
# NFCピンを通常のGPIOとして使用（nRF52840のピン数を増やす）
CONFIG_NFCT_PINS_AS_GPIOS=y

# --- ハードウェアインターフェース ---
# SPI通信を有効化（トラックボールセンサーとの通信に使用）
CONFIG_SPI=y
# Input APIを有効化（センサー入力を処理）
CONFIG_INPUT=y

# ============================================================
# PMW3610 トラックボールセンサー設定
# ============================================================

# --- 基本設定 ---
# PMW3610センサードライバーを有効化
CONFIG_PMW3610=y

# --- カーソル移動設定 ---
# CPI (Counts Per Inch): センサー解像度
# 値が大きいほどカーソルが速く動く（推奨: 200-1600）
CONFIG_PMW3610_CPI=400
# CPI除算器: CPIを細かく調整（通常は1のまま）
CONFIG_PMW3610_CPI_DIVIDOR=1
# センサーを180度回転（ハードウェア実装に合わせる）
CONFIG_PMW3610_ORIENTATION_180=y
# X軸の動きを反転（無効）
CONFIG_PMW3610_INVERT_X=n

# --- スナイプモード（精密照準モード）---
# 低速で精密な操作が必要な時のCPI設定（現在は未使用）
# CONFIG_PMW3610_SNIPE_CPI=800
# CONFIG_PMW3610_SNIPE_CPI_DIVIDOR=4

# --- スクロール設定 ---
# スクロールティック: 値が小さいほどスクロールが敏感（推奨: 8-32）
CONFIG_PMW3610_SCROLL_TICK=16
# X軸スクロール方向を反転
CONFIG_PMW3610_INVERT_SCROLL_X=y

# --- 省電力設定 ---
# RUNモードから低電力モードへの切替時間（ミリ秒）
CONFIG_PMW3610_RUN_DOWNSHIFT_TIME_MS=3264
# REST1モード: サンプリング間隔（省電力レベル1）
CONFIG_PMW3610_REST1_SAMPLE_TIME_MS=20
# REST1への移行時間（未設定 = デフォルト）
#CONFIG_PMW3610_REST1_DOWNSHIFT_TIME_MS=9600
# REST2/REST3モード設定（より深い省電力モード、現在は未使用）
#CONFIG_PMW3610_REST2_SAMPLE_TIME_MS=
#CONFIG_PMW3610_REST2_DOWNSHIFT_TIME_MS=
#CONFIG_PMW3610_REST3_SAMPLE_TIME_MS=
#CONFIG_PMW3610_REST3_DOWNSHIFT_TIME_MS=
# 常時起動モード（無効 = 省電力モードを使用）
#CONFIG_PMW3610_FORCE_AWAKE=n

# --- パフォーマンス設定 ---
# ポーリングレート: 125Hz（1秒間に125回センサーを読み取る）
# 高いほど応答性が良いが消費電力も増加
CONFIG_PMW3610_POLLING_RATE_125_SW=y
# 自動マウスレイヤータイムアウト: 300ms操作がないと元のレイヤーに戻る
CONFIG_PMW3610_AUTOMOUSE_TIMEOUT_MS=300
# 動き検知閾値: 0 = 微小な動きも検知
CONFIG_PMW3610_MOVEMENT_THRESHOLD=0

# --- 高度な機能 ---
# スマートアルゴリズム: より精密な動き検出とノイズ除去
CONFIG_PMW3610_SMART_ALGORITHM=y

# ============================================================
# その他のハードウェア
# ============================================================

# --- ロータリーエンコーダー設定 ---
# ロータリーエンコーダー（回転ノブ）を有効化
CONFIG_EC11=y
# エンコーダーイベントをグローバルスレッドで処理（応答性向上）
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# --- バッテリー管理 ---
# バッテリー残量のレポート機能を有効化
CONFIG_ZMK_BATTERY_REPORTING=y
# 右手側（セントラル）が左手側のバッテリー情報をプロキシ
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
# 右手側が左手側のバッテリー情報を取得
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y

# ============================================================
# ZMK Studio設定（動的キーマップ編集機能）
# ============================================================

# ZMK Studio機能を有効化（USB/UART経由でキーマップをGUI編集可能）
CONFIG_ZMK_STUDIO=y
# Studio設定ロック機能を無効化（誰でも編集可能にする）
CONFIG_ZMK_STUDIO_LOCKING=n
